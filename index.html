<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>TEMOTIVA | Innovación en bienestar emocional</title>
  <meta name="description" content="Bienestar emocional para mejorar la salud mental y el autocuidado en la vida cotidiana.">
  <meta name="keywords" content="bienestar emocional, salud mental, autocuidado, tecnología emocional, temotiva, innovación, psicología digital">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#F7F7F7" id="meta-theme">
  <meta name="application-name" content="TEMOTIVA">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
  <meta name="color-scheme" content="light dark">

  <!-- Estilos globales -->
  <link rel="stylesheet" href="/style.css" />

  <!-- Estilos mínimos para portada, header y sidebar -->
  <style>
    /* Layout lateral */
    .layout { display:flex; min-height:100vh; }
    .sidebar {
      position:sticky; top:64px; align-self:flex-start;
      width:250px; padding:20px 16px; background:#fff; border-right:1px solid #eee;
      height:calc(100vh - 64px); box-sizing:border-box;
    }
    .sidebar .logo-side { display:flex; align-items:center; gap:8px; text-decoration:none; color:#111; font-weight:700; }
    .sidebar .logo-side img { width:32px; height:32px; border-radius:8px; }
    .menu-list { list-style:none; padding:0; margin:16px 0; }
    .menu-list li { margin:8px 0; }
    .menu-list a { text-decoration:none; color:#333; padding:8px 10px; display:block; border-radius:8px; }
    .menu-list a:hover, .menu-list a:focus { background:#f4f4f4; outline:none; }
    .privacy-link { display:block; margin-top:12px; font-size:14px; color:#666; text-decoration:none; }
    .content { flex:1; min-width:0; }

    /* Header fijo sin tapar contenido */
    .site-header{ position:fixed; top:0; left:0; right:0; height:64px; z-index:1000; background:var(--card); border-bottom:1px solid #ddd; }
    .nav{ height:64px; display:flex; align-items:center; justify-content:space-between; }
    body{ padding-top:64px; }

    /* Portada: imagen completa a la derecha y texto siempre visible */
    .section.hero {
      position: relative;
      text-align: center;
      padding: 6rem 0 5rem;
      background: linear-gradient(180deg, #ffffff, #f2f2f2) !important;
      background-attachment: scroll !important;
      overflow: hidden;
      z-index: 0;
      scroll-margin-top:80px;
    }
    .section.hero::after{
      content:"";
      position:absolute;
      top:0; right:0; bottom:0; left:55%;
      background: url("/chica-meditando.png") right center / contain no-repeat;
      opacity:.22;
      pointer-events:none;
      z-index:-1;
    }
    @media (max-width: 900px){
      .section.hero::after{ left:65%; opacity:.16; }
    }
    @media (min-width: 1000px){
      .section.hero{ min-height:520px; }
    }

    /* Botonera de acciones en header */
    .header-actions{ display:flex; align-items:center; gap:.5rem; }
    .icon-btn{
      border:1px solid #ddd; background:var(--card); color:var(--ink);
      padding:.45rem .65rem; border-radius:10px; cursor:pointer; min-height:36px;
    }
    .icon-btn:hover{ background:var(--muted); }

    /* Móvil: sidebar deslizable */
    @media (max-width: 900px) {
      .sidebar { position:fixed; left:-270px; top:64px; transition:left .25s ease; z-index:9999; }
      .sidebar.is-open { left:0; box-shadow:0 6px 28px rgba(0,0,0,.15); }
      .overlay { position:fixed; inset:0; background:rgba(0,0,0,.25); display:none; z-index:9998; }
      .overlay.show { display:block; }
      .content { width:100%; }
      .site-header .menu-btn { display:inline-block; }
    }

    /* Hotfix reveal por si el JS no carga */
    .reveal { opacity:1 !important; transform:none !important; }
  </style>
</head>
<body>
  <noscript>Activa JavaScript para usar TEMOTIVA.</noscript>

  <!-- Overlay móvil -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- Header -->
  <header class="site-header">
    <div class="container nav">
      <a href="#inicio" class="logo" style="display:flex;align-items:center;gap:8px;text-decoration:none;color:inherit;">
        <img src="/icon-192.png" alt="Logo TEMOTIVA" style="width:36px;height:36px;border-radius:8px;">
        <span>TEMOTIVA</span>
      </a>

      <div class="header-actions">
        <!-- Idioma -->
        <button id="langBtn" class="icon-btn" aria-label="Cambiar idioma">ES/EN</button>
        <!-- Tema -->
        <button id="themeBtn" class="icon-btn" aria-label="Cambiar tema">☾/☀︎</button>
        <!-- Menú móvil -->
        <button id="menuBtn" aria-label="Abrir menú" class="menu-btn">☰</button>
      </div>

      <nav id="mainNav" class="nav-links">
        <a href="#inicio" data-i18n="nav.home">Inicio</a>
        <a href="#mision" data-i18n="nav.mission">Misión</a>
        <a href="#producto" data-i18n="nav.product">Producto</a>
        <a href="#equipo" data-i18n="nav.team">Equipo</a>
        <a href="#contacto" data-i18n="nav.contact">Contacto</a>
      </nav>
    </div>
  </header>

  <!-- Layout con barra lateral + contenido -->
  <div class="layout">
    <nav class="sidebar" aria-label="Menú lateral">
      <a class="logo-side" href="/inicio.html">
        <img src="/icon-192.png" alt="Logo TEMOTIVA">
        <span>TEMOTIVA</span>
      </a>
      <ul class="menu-list">
        <li><a href="/inicio.html" data-i18n="side.home">Inicio</a></li>
        <li><a href="/blog/index.html" data-i18n="side.blog">Blog</a></li>
        <li><a href="/recursos.html" data-i18n="side.resources">Recursos</a></li>
        <li><a href="/contacto.html" data-i18n="side.contact">Contacto</a></li>
        <li><a href="/login.html" data-i18n="side.login">Iniciar sesión</a></li>
      </ul>
      <a class="privacy-link" href="/privacidad.html" data-i18n="side.privacy">Privacidad</a>
    </nav>

    <main class="content" id="app">
      <!-- Inicio -->
      <section id="inicio" class="section hero">
        <div class="container">
          <h1 data-i18n="hero.title">Bienestar emocional y tecnología</h1>
          <p data-i18n="hero.subtitle">Plataforma sencilla para comprender, cuidar y entrenar el bienestar emocional, basada en ciencia.</p>
          <div style="display:flex;justify-content:center;gap:16px;flex-wrap:wrap;margin-top:24px;">
            <a href="/particular.html" class="btn" data-i18n="hero.ctaUser">Soy particular</a>
            <a href="/organizacion.html" class="btn" data-i18n="hero.ctaOrg">Soy organización</a>
          </div>
        </div>
      </section>

      <nav style="text-align:center; padding:40px 0;">
        <a href="/blog/" style="background:#f3f3f3; color:#333; padding:12px 28px; border-radius:30px; text-decoration:none; font-weight:500; letter-spacing:0.3px; box-shadow:0 2px 6px rgba(0,0,0,0.1); transition:all .25s ease-in-out;" data-i18n="blog.enter">
          Entrar al Blog
        </a>
        <p style="margin-top:12px; color:#555; font-size:15px;" data-i18n="blog.note">Un espacio tranquilo para leer, pensar y cuidarte.</p>
      </nav>

      <!-- Misión -->
      <section id="mision" class="section reveal">
        <div class="container">
          <h2 data-i18n="mission.title">Nuestra misión</h2>
          <p data-i18n="mission.desc">Crear herramientas accesibles, seguras y útiles que apoyen hábitos saludables, autoobservación y decisión informada.</p>
          <ul class="bullets">
            <li data-i18n="mission.b1">Psicología basada en evidencia</li>
            <li data-i18n="mission.b2">Privacidad por diseño</li>
            <li data-i18n="mission.b3">Accesibilidad y lenguaje claro</li>
          </ul>
        </div>
      </section>

      <!-- Producto -->
      <section id="producto" class="section alt reveal">
        <div class="container">
          <h2 data-i18n="product.title">Producto</h2>
          <p data-i18n="product.desc">Primera versión, autochequeo diario, micro ejercicios de regulación y panel de progreso.</p>

          <div class="grid">
            <div class="card">
              <h3 data-i18n="product.c1t">Chequeo</h3>
              <p data-i18n="product.c1d">2 a 3 preguntas al día para tomar pulso emocional sin saturar.</p>
            </div>
            <div class="card">
              <h3 data-i18n="product.c2t">Ejercicios</h3>
              <p data-i18n="product.c2d">Respiración, reencuadre, plan de acción breve. Todo guiado.</p>
            </div>
            <div class="card">
              <h3 data-i18n="product.c3t">Progreso</h3>
              <p data-i18n="product.c3d">Gráficas simples y metas semanales comprensibles.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Frase del día -->
      <section id="frase" class="section reveal">
        <div class="container">
          <h2 data-i18n="quote.title">Frase del día</h2>
          <p id="fraseTexto" class="frase">Respira. Un paso a la vez.</p>
          <button id="nuevaFraseBtn" class="btn" data-i18n="quote.new">Nueva frase</button>
        </div>
      </section>

      <!-- Equipo -->
      <section id="equipo" class="section reveal">
        <div class="container">
          <h2 data-i18n="team.title">Equipo</h2>
          <div class="grid team">
            <article class="member">
              <h3>G. Musterova</h3>
              <p data-i18n="team.m1">Psicología, investigación y dirección.</p>
            </article>
            <article class="member">
              <h3 data-i18n="team.m2t">Colaborador técnico</h3>
              <p data-i18n="team.m2">Front end y producto.</p>
            </article>
            <article class="member">
              <h3 data-i18n="team.m3t">Consejo asesor</h3>
              <p data-i18n="team.m3">Clínica, datos y ética.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- Contacto -->
      <section id="contacto" class="section alt">
        <div class="container">
          <h2 data-i18n="contact.title">Contacto</h2>
          <form id="contactForm" class="form">
            <input type="hidden" name="_subject" value="Nuevo mensaje desde TEMOTIVA">
            <input type="hidden" name="_language" value="es">

            <input type="text" name="nombre" placeholder="Tu nombre" required data-i18n-placeholder="contact.name" />
            <input type="email" name="email" placeholder="Tu email" required data-i18n-placeholder="contact.email" />
            <textarea name="mensaje" rows="4" placeholder="¿Cómo podemos ayudarte?" required data-i18n-placeholder="contact.msg"></textarea>

            <label style="display:flex;gap:8px;align-items:flex-start;font-size:14px;margin:8px 0 12px;">
              <input type="checkbox" name="consent" required>
              <span data-i18n="contact.gdpr">Acepto la <a href='/privacidad.html'>política de privacidad</a></span>
            </label>

            <input type="text" name="_gotcha" style="display:none">
            <button type="submit" class="btn" data-i18n="contact.send">Enviar</button>
          </form>
          <p id="formMsg" class="form-msg oculto" data-i18n="contact.ok">Gracias, te contactaremos pronto.</p>
        </div>
      </section>

      <footer class="site-footer">
        <div class="container">
          <p>© TEMOTIVA desde 2024</p>
          <a href="#inicio" class="back-top" data-i18n="footer.top">Volver arriba ↑</a>
        </div>
      </footer>
    </main>
  </div>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://ejhzxwnhqvcqjqxnuvya.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_8nz_638F1vO2JbkFw9DHSw_AxB179qA";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    console.log("Conectado a Supabase");
  </script>

  <!-- Tu JS -->
  <script src="/script.js" defer></script>

  <!-- JS de UI: sidebar, tema, idioma, reveal, SW -->
  <script>
    // Sidebar móvil
    const menuBtn = document.getElementById("menuBtn");
    const sidebar = document.querySelector(".sidebar");
    const overlay = document.getElementById("overlay");
    function toggleSidebar() {
      sidebar.classList.toggle("is-open");
      const open = sidebar.classList.contains("is-open");
      overlay.classList.toggle("show", open);
      overlay.setAttribute("aria-hidden", String(!open));
    }
    if (menuBtn) menuBtn.addEventListener("click", toggleSidebar);
    if (overlay) overlay.addEventListener("click", toggleSidebar);

    // Modo oscuro
    const themeBtn = document.getElementById("themeBtn");
    const metaTheme = document.getElementById("meta-theme");
    const THEME_KEY = "temotiva-theme";
    function applyTheme(t){
      document.documentElement.dataset.theme = t; // para CSS si quieres
      if(t === "dark"){
        metaTheme.setAttribute("content", "#0f1115");
        document.documentElement.classList.add("theme-dark");
      }else{
        metaTheme.setAttribute("content", "#F7F7F7");
        document.documentElement.classList.remove("theme-dark");
      }
      localStorage.setItem(THEME_KEY, t);
    }
    const savedTheme = localStorage.getItem(THEME_KEY);
    if(savedTheme){ applyTheme(savedTheme); }
    if(themeBtn){
      themeBtn.addEventListener("click", () => {
        const next = document.documentElement.classList.contains("theme-dark") ? "light" : "dark";
        applyTheme(next);
      });
    }

    // Idiomas ES/EN con diccionario mínimo
    const langBtn = document.getElementById("langBtn");
    const LANG_KEY = "temotiva-lang";
    const i18n = {
      es: {
        "nav.home":"Inicio","nav.mission":"Misión","nav.product":"Producto","nav.team":"Equipo","nav.contact":"Contacto",
        "side.home":"Inicio","side.blog":"Blog","side.resources":"Recursos","side.contact":"Contacto","side.login":"Iniciar sesión","side.privacy":"Privacidad",
        "hero.title":"Bienestar emocional y tecnología",
        "hero.subtitle":"Plataforma sencilla para comprender, cuidar y entrenar el bienestar emocional, basada en ciencia.",
        "hero.ctaUser":"Soy particular","hero.ctaOrg":"Soy organización",
        "blog.enter":"Entrar al Blog","blog.note":"Un espacio tranquilo para leer, pensar y cuidarte.",
        "mission.title":"Nuestra misión","mission.desc":"Crear herramientas accesibles, seguras y útiles que apoyen hábitos saludables, autoobservación y decisión informada.",
        "mission.b1":"Psicología basada en evidencia","mission.b2":"Privacidad por diseño","mission.b3":"Accesibilidad y lenguaje claro",
        "product.title":"Producto","product.desc":"Primera versión, autochequeo diario, micro ejercicios de regulación y panel de progreso.",
        "product.c1t":"Chequeo","product.c1d":"2 a 3 preguntas al día para tomar pulso emocional sin saturar.",
        "product.c2t":"Ejercicios","product.c2d":"Respiración, reencuadre, plan de acción breve. Todo guiado.",
        "product.c3t":"Progreso","product.c3d":"Gráficas simples y metas semanales comprensibles.",
        "quote.title":"Frase del día","quote.new":"Nueva frase",
        "team.title":"Equipo","team.m1":"Psicología, investigación y dirección.","team.m2t":"Colaborador técnico","team.m2":"Front end y producto.","team.m3t":"Consejo asesor","team.m3":"Clínica, datos y ética.",
        "contact.title":"Contacto","contact.name":"Tu nombre","contact.email":"Tu email","contact.msg":"¿Cómo podemos ayudarte?","contact.gdpr":"Acepto la <a href='/privacidad.html'>política de privacidad</a>","contact.send":"Enviar","contact.ok":"Gracias, te contactaremos pronto.",
        "footer.top":"Volver arriba ↑"
      },
      en: {
        "nav.home":"Home","nav.mission":"Mission","nav.product":"Product","nav.team":"Team","nav.contact":"Contact",
        "side.home":"Home","side.blog":"Blog","side.resources":"Resources","side.contact":"Contact","side.login":"Log in","side.privacy":"Privacy",
        "hero.title":"Emotional wellbeing and technology",
        "hero.subtitle":"A simple platform to understand, care for, and train emotional wellbeing, grounded in science.",
        "hero.ctaUser":"I am an individual","hero.ctaOrg":"I am an organization",
        "blog.enter":"Go to Blog","blog.note":"A calm space to read, think, and take care of yourself.",
        "mission.title":"Our mission","mission.desc":"Create accessible, safe, and useful tools that support healthy habits, self-observation, and informed decisions.",
        "mission.b1":"Evidence-based psychology","mission.b2":"Privacy by design","mission.b3":"Accessibility and clear language",
        "product.title":"Product","product.desc":"First version, daily self-check, micro regulation exercises, and a progress panel.",
        "product.c1t":"Check-in","product.c1d":"2 to 3 questions a day to gauge your emotional pulse without overwhelm.",
        "product.c2t":"Exercises","product.c2d":"Breathing, reframing, brief action plan. Fully guided.",
        "product.c3t":"Progress","product.c3d":"Simple charts and understandable weekly goals.",
        "quote.title":"Quote of the day","quote.new":"New quote",
        "team.title":"Team","team.m1":"Psychology, research, and direction.","team.m2t":"Tech collaborator","team.m2":"Front end and product.","team.m3t":"Advisory board","team.m3":"Clinic, data, and ethics.",
        "contact.title":"Contact","contact.name":"Your name","contact.email":"Your email","contact.msg":"How can we help you?","contact.gdpr":"I accept the <a href='/privacidad.html'>privacy policy</a>","contact.send":"Send","contact.ok":"Thanks, we will contact you soon.",
        "footer.top":"Back to top ↑"
      }
    };
    function applyLang(lang){
      const dict = i18n[lang] || i18n.es;
      document.documentElement.setAttribute("lang", lang === "en" ? "en" : "es");
      // text nodes
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        if(dict[key]) el.innerHTML = dict[key];
      });
      // placeholders
      document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
        const key = el.getAttribute("data-i18n-placeholder");
        if(dict[key]) el.setAttribute("placeholder", el.tagName==="TEXTAREA" ? dict[key] : dict[key]);
      });
      localStorage.setItem(LANG_KEY, lang);
    }
    const savedLang = localStorage.getItem(LANG_KEY) || "es";
    applyLang(savedLang);
    if(langBtn){
      langBtn.addEventListener("click", ()=>{
        const next = (localStorage.getItem(LANG_KEY) || "es") === "es" ? "en" : "es";
        applyLang(next);
      });
    }

    // Animación reveal correcta
    document.documentElement.classList.add('js-ready');
    (function(){
      const items = document.querySelectorAll('.reveal');
      if (!('IntersectionObserver' in window)) {
        items.forEach(el => el.classList.add('visible'));
        return;
      }
      const io = new IntersectionObserver(entries => {
        entries.forEach(e => {
          if (e.isIntersecting) { e.target.classList.add('visible'); io.unobserve(e.target); }
        });
      }, { threshold: 0.1, rootMargin: '0px 0px -10% 0px' });
      items.forEach(el => io.observe(el));
    })();

    // Service Worker
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker
          .register("/pwabuilder-sw.js", { scope: "/" })
          .then(reg => console.log("Service Worker activo:", reg.scope))
          .catch(err => console.error("Fallo al registrar el SW:", err));
      });
    }

    // Formspree
    const cf = document.getElementById("contactForm");
    if (cf) {
      cf.addEventListener("submit", async function(e){
        e.preventDefault();
        const form = e.target;
        const btn = form.querySelector("button[type=submit]");
        btn.disabled = true;
        try {
          const resp = await fetch("https://formspree.io/f/xnnobrvn", {
            method: "POST",
            headers: { "Accept": "application/json" },
            body: new FormData(form)
          });
          if (resp.ok) {
            form.reset();
            document.getElementById("formMsg").classList.remove("oculto");
          } else {
            alert("No se pudo enviar, intenta de nuevo más tarde.");
          }
        } catch {
          alert("Error de red, revisa tu conexión.");
        } finally {
          btn.disabled = false;
        }
      });
    }
  </script>

  <footer style="padding:16px;text-align:center;font-size:14px;">
    <a href="/privacidad.html" data-i18n="side.privacy">Política de privacidad</a> ·
    <a href="/cookies.html">Política de cookies</a> ·
    <a href="/aviso-legal.html">Aviso legal</a>
  </footer>
</body>
</html>
