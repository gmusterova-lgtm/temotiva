<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Mi cuenta | Espacio Temotiva</title>

  <meta name="description" content="Panel de cuenta de Temotiva para gestionar tu acceso, ver tus actividades y participar en el proyecto de forma segura.">
  <link rel="canonical" href="https://www.temotiva.com/micuenta.html">

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#F7F7F7">

  <link rel="icon" href="/icon-192.png">
  <link rel="apple-touch-icon" href="/icon-512.png">
  <link rel="stylesheet" href="/style.css">

  <style>
    /* Shell general del panel */
    .account-shell{
      padding-top:4.5rem;
      background:radial-gradient(circle at top left,#e5edff,#f5f7fb);
      min-height:100vh;
    }

    /* Hero tipo SaaS */
    .account-hero{
      padding:2.6rem 0 2.4rem;
      border-bottom:1px solid rgba(148,163,184,.35);
    }
    .account-inner{
      max-width:1040px;
      margin:0 auto;
      display:grid;
      gap:1.8rem;
    }
    @media (min-width:960px){
      .account-inner{
        grid-template-columns:minmax(0,1.6fr) minmax(0,1.1fr);
        align-items:flex-start;
      }
    }

    .acc-top-tag{
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      padding:.25rem .7rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.35);
      background:#ffffffdd;
      font-size:.78rem;
      text-transform:uppercase;
      letter-spacing:.16em;
      opacity:.85;
      margin-bottom:.6rem;
    }
    .acc-top-dot{
      width:7px;
      height:7px;
      border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 0 3px rgba(34,197,94,.25);
    }

    .acc-title{
      margin:0 0 .4rem;
      font-size:clamp(2rem,2.7vw,2.3rem);
    }
    .acc-subtitle{
      margin:0 0 1.1rem;
      max-width:50ch;
      opacity:.96;
      line-height:1.7;
    }

    .acc-meta-row{
      display:flex;
      flex-wrap:wrap;
      gap:.6rem;
      font-size:.85rem;
      opacity:.9;
    }
    .acc-meta-pill{
      padding:.28rem .7rem;
      border-radius:999px;
      background:rgba(15,23,42,.04);
      border:1px solid rgba(148,163,184,.35);
    }

    /* Panel usuario tipo tarjeta SaaS */
    .acc-panel{
      background:#ffffff;
      border-radius:18px;
      padding:1.6rem 1.5rem 1.4rem;
      box-shadow:0 16px 40px rgba(15,23,42,.14);
      border:1px solid rgba(148,163,184,.4);
      font-size:.95rem;
    }
    .acc-panel-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.8rem;
      margin-bottom:1rem;
    }
    .acc-panel-title{
      margin:0;
      font-size:1.05rem;
    }
    .acc-badge{
      padding:.15rem .6rem;
      border-radius:999px;
      font-size:.75rem;
      border:1px solid rgba(34,197,94,.6);
      background:rgba(22,163,74,.06);
      color:#15803d;
      white-space:nowrap;
    }

    .acc-row{
      display:flex;
      flex-direction:column;
      gap:.25rem;
      margin-bottom:.7rem;
      font-size:.9rem;
    }
    .acc-label{
      font-size:.78rem;
      text-transform:uppercase;
      letter-spacing:.12em;
      opacity:.7;
    }
    .acc-value{
      font-weight:500;
      word-break:break-all;
    }

    .acc-status{
      margin-top:.6rem;
      font-size:.85rem;
      opacity:.95;
    }

    .btn-logout{
      margin-top:1rem;
      padding:.55rem 1.1rem;
      border-radius:999px;
      border:1px solid #dc2626;
      background:#fef2f2;
      color:#b91c1c;
      font-size:.85rem;
      cursor:pointer;
      font-weight:500;
      align-self:flex-start;
    }
    .btn-logout:hover{
      background:#fee2e2;
    }

    /* Sección principal tipo grid de tarjetas */
    .acc-main{
      padding:2.4rem 0 3rem;
    }
    .acc-main-inner{
      max-width:1040px;
      margin:0 auto;
      display:grid;
      gap:1.5rem;
    }

    .acc-main-head{
      display:flex;
      flex-wrap:wrap;
      align-items:flex-end;
      justify-content:space-between;
      gap:.8rem;
    }
    .acc-main-title{
      margin:0;
      font-size:1.3rem;
    }
    .acc-main-text{
      margin:.2rem 0 0;
      opacity:.9;
      font-size:.94rem;
      max-width:52ch;
    }

    .acc-quick-grid{
      display:grid;
      gap:1rem;
    }
    @media (min-width:880px){
      .acc-quick-grid{
        grid-template-columns:2fr 1.6fr 1.6fr;
      }
    }

    .acc-card{
      background:#ffffff;
      border-radius:16px;
      padding:1.1rem 1.1rem 1.15rem;
      border:1px solid rgba(148,163,184,.35);
      box-shadow:0 10px 26px rgba(15,23,42,.08);
      font-size:.93rem;
      display:flex;
      flex-direction:column;
      gap:.45rem;
      height:100%;
    }
    .acc-card h3{
      margin:0;
      font-size:1rem;
    }
    .acc-card p{
      margin:0;
      opacity:.96;
      line-height:1.6;
    }
    .acc-chip{
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      font-size:.8rem;
      opacity:.9;
      margin-top:.35rem;
    }
    .acc-chip-dot{
      width:7px;
      height:7px;
      border-radius:999px;
      background:#3b82f6;
    }
    .acc-card-link{
      margin-top:.4rem;
      font-size:.88rem;
      color:#2563eb;
      text-decoration:none;
      font-weight:500;
    }
    .acc-card-link:hover{
      text-decoration:underline;
    }

    .acc-empty{
      margin-top:1.2rem;
      padding:1rem 1.1rem;
      border-radius:14px;
      border:1px dashed rgba(148,163,184,.7);
      font-size:.88rem;
      background:#f9fafb;
    }

    @media (max-width:720px){
      .account-hero{
        padding:2.1rem 0 1.8rem;
      }
      .acc-panel{
        padding:1.3rem 1.1rem 1.4rem;
      }
    }
  </style>
</head>

<body>
  <!-- Header reutilizado -->
  <header class="site-header">
    <div class="container nav">
      <a href="https://www.temotiva.com" class="logo">
        <img src="/logo-temotiva.png" alt="Logo TEMOTIVA" width="36" height="36">
        <span>TEMOTIVA</span>
      </a>

      <nav class="nav-links">
        <a href="/demo.html">App</a>
        <a href="/particular.html">Talleres</a>
        <a href="/organizacion.html">Organizaciones</a>
        <a href="/recursos.html">Recursos</a>
        <a href="/blog/">Blog</a>
        <a href="/temotiva-lab.html">Lab</a>
        <a href="/ctl.html">CTL</a>
        <a href="/contacto.html">Contacto</a>
        <a href="/micuenta.html" aria-current="page">Mi cuenta</a>
      </nav>
    </div>
  </header>

  <main class="account-shell">
    <!-- HERO PANEL TIPO SAAS -->
    <section class="account-hero">
      <div class="account-inner">
        <div>
          <div class="acc-top-tag">
            <span class="acc-top-dot"></span>
            <span>Panel de cuenta</span>
          </div>
          <h1 class="acc-title">Tu espacio dentro del ecosistema Temotiva</h1>
          <p class="acc-subtitle">
            Desde aquí gestionas tu acceso, ves la información básica de tu cuenta y, poco a poco, encontrarás tus talleres, actividades y colaboraciones con Temotiva.
          </p>
          <div class="acc-meta-row">
            <span class="acc-meta-pill">Sesión segura con Supabase</span>
            <span class="acc-meta-pill">Pensado para personas y organizaciones</span>
            <span class="acc-meta-pill">En construcción, irá creciendo contigo</span>
          </div>
        </div>

        <!-- Panel usuario -->
        <aside class="acc-panel" id="account-panel">
          <div class="acc-panel-header">
            <h2 class="acc-panel-title">Resumen de tu cuenta</h2>
            <span class="acc-badge" id="acc-session-pill">Sesión no verificada</span>
          </div>

          <div class="acc-row">
            <span class="acc-label">Correo</span>
            <span class="acc-value" id="acc-email">Cargando...</span>
          </div>

          <div class="acc-row">
            <span class="acc-label">Tipo de cuenta</span>
            <span class="acc-value" id="acc-type">Sin datos todavía</span>
          </div>

          <p class="acc-status" id="acc-status">
            Estamos leyendo tu sesión activa. Si no ves tus datos en unos segundos, es posible que necesites iniciar sesión de nuevo.
          </p>

          <button type="button" class="btn-logout" id="btn-logout">
            Cerrar sesión
          </button>
        </aside>
      </div>
    </section>

    <!-- SECCIÓN PRINCIPAL: TARJETAS Y TALLERES -->
    <section class="acc-main">
      <div class="acc-main-inner">
        <header class="acc-main-head">
          <div>
            <h2 class="acc-main-title">Lo que podrás hacer desde tu cuenta</h2>
            <p class="acc-main-text">
              Este panel está pensado para ir integrando de forma gradual tus talleres, actividades y accesos digitales, manteniendo tu identidad y tu seguridad en el centro.
            </p>
          </div>
        </header>

        <div class="acc-quick-grid">
          <article class="acc-card">
            <h3>Talleres y actividades</h3>
            <p>
              Aquí verás en el futuro los talleres que reserves, cursos online y actividades puntuales vinculadas a tu cuenta Temotiva.
            </p>
            <div class="acc-chip">
              <span class="acc-chip-dot"></span>
              <span>Módulo en desarrollo</span>
            </div>
          </article>

          <article class="acc-card">
            <h3>Acceso a la app</h3>
            <p>
              App y web tienen accesos independientes, pero comparten tu perfil para que tu experiencia sea coherente y respetuosa con tus tiempos.
            </p>
            <a href="/demo.html" class="acc-card-link">Abrir demo de la app</a>
          </article>

          <article class="acc-card">
            <h3>Colaborar con Temotiva LAB</h3>
            <p>
              Si formas parte de un equipo, centro o entidad, este espacio permitirá conectar tus actividades con proyectos y pilotos que construyamos juntos.
            </p>
            <a href="/contacto.html" class="acc-card-link">Proponer una colaboración</a>
          </article>
        </div>

        <div class="acc-empty" id="acc-talleres">
          Todavía no hay talleres ni cursos asociados a tu cuenta en esta vista. Usaremos este espacio para mostrar tus actividades cuando integremos el sistema de reservas de forma segura.
        </div>
      </div>
    </section>
  </main>

  <!-- Footer básico -->
  <footer class="site-footer">
    <div class="container" style="display:flex;flex-wrap:wrap;gap:.8rem;justify-content:space-between;">
      <p style="margin:0;">© TEMOTIVA y Cognitiva Tech Lab</p>
      <div style="display:flex;gap:.7rem;">
        <a href="/privacidad.html">Privacidad</a>
        <a href="/cookies.html">Cookies</a>
        <a href="/aviso-legal.html">Aviso legal</a>
      </div>
    </div>
  </footer>

  <!-- Supabase -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://ejhzxwnhqvcqjqxnuvya.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqaHp4d25ocXZjcWpxeG51dnlhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1OTg4NTUsImV4cCI6MjA3NzE3NDg1NX0.5tyEz-JqqjDa0Eduy7R2O1U0KO5JgU-vqa4afCb0_Ag";

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    document.addEventListener('DOMContentLoaded', async () => {
      const emailSpan = document.getElementById('acc-email');
      const typeSpan = document.getElementById('acc-type');
      const statusP = document.getElementById('acc-status');
      const logoutBtn = document.getElementById('btn-logout');
      const sessionPill = document.getElementById('acc-session-pill');

      // Consultar usuario actual
      const { data, error } = await supabase.auth.getUser();

      if (error || !data || !data.user) {
        emailSpan.textContent = 'No hay ninguna sesión activa.';
        typeSpan.textContent = 'Invitado';
        statusP.textContent = 'Para ver los detalles de tu cuenta, inicia sesión desde la página de contacto.';
        statusP.style.color = '#b91c1c';

        if (sessionPill) {
          sessionPill.textContent = 'Sesión no activa';
          sessionPill.style.borderColor = '#f97316';
          sessionPill.style.backgroundColor = 'rgba(248,171,84,.12)';
          sessionPill.style.color = '#c2410c';
        }
      } else {
        const user = data.user;
        emailSpan.textContent = user.email || 'Sin correo disponible';
        typeSpan.textContent = 'En desarrollo para personas y organizaciones.';
        statusP.textContent = 'Sesión activa. Iremos añadiendo más contenido y opciones en este espacio.';
        statusP.style.color = '#166534';

        if (sessionPill) {
          sessionPill.textContent = 'Sesión activa';
          sessionPill.style.borderColor = 'rgba(34,197,94,.7)';
          sessionPill.style.backgroundColor = 'rgba(22,163,74,.08)';
          sessionPill.style.color = '#15803d';
        }
      }

      // Cerrar sesión
      logoutBtn.addEventListener('click', async () => {
        await supabase.auth.signOut();
        window.location.href = '/contacto.html';
      });
    });
  </script>

</body>
</html>
